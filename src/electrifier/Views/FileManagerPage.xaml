<Page x:Class="electrifier.Views.FileManagerPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:behaviors="using:electrifier.Behaviors"
      xmlns:controls="using:CommunityToolkit.WinUI.Controls"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="using:electrifier.Services"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      behaviors:NavigationViewHeaderBehavior.HeaderMode="Never"
      mc:Ignorable="d">
    <Grid x:Name="ContentArea">
        <StackPanel Orientation="Vertical">
            <MenuBar x:Name="MenuBarTop"
                     IsEnabled="False">
                <MenuBarItem Title="File">
                    <MenuFlyoutItem Text="New" />
                    <MenuFlyoutItem Text="Open..." />
                </MenuBarItem>
                <MenuBarItem Title="Edit">
                    <MenuFlyoutItem Text="Undo" />
                    <MenuFlyoutItem Text="Cut" />
                    <MenuFlyoutItem Text="Copy" />
                    <MenuFlyoutItem Text="Paste" />
                </MenuBarItem>
                <MenuBarItem Title="View">
                    <MenuFlyoutItem Text="Zoom In" />
                    <MenuFlyoutItem Text="Zoom Out" />
                </MenuBarItem>
            </MenuBar>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition MaxWidth="600"
                                      MinWidth="200"
                                      Width="300" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.Resources>
                    <DataTemplate x:Key="ShellTreeViewItemTemplate"
                                  x:DataType="local:DosShellItem">
                        <StackPanel Orientation="Horizontal"
                                    MaxHeight="20">
                            <ImageIcon x:Name="ShellViewItemTemplate_DefaultFolderIcon"
                                       Visibility="{x:Bind IsFolder}"
                                       Source="ms-appx:///Assets/Views/Workbench/Shell32 Default Folder.ico" />
                            <ImageIcon x:Name="ShellViewItemTemplate_DefaultFileIcon"
                                       Visibility="{x:Bind IsFile}"
                                       Source="ms-appx:///Assets/Views/Workbench/Shell32 Default unknown File.ico" />
                            <TextBlock x:Name="ShellViewItemTemplate_TextBlock"
                                       Margin="5,0,5,0"
                                       Text="{x:Bind Name}" />
                        </StackPanel>
                    </DataTemplate>
                    <DataTemplate x:Key="ShellGridViewItemTemplate"
                                  x:DataType="local:DosShellItem">
                        <Grid Height="150"
                              Width="150"
                              Margin="3">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="45" />
                            </Grid.RowDefinitions>
                            <!-- TODO: Use constant from DosShellItemHelpers as ImageIcon.Source -->
                            <ImageIcon x:Name="ImageGridView_ItemTemplate_DefaultFolderIcon"
                                       Visibility="{x:Bind IsFolder}"
                                       Source="ms-appx:///Assets/Views/Workbench/Shell32 Default Folder.ico"
                                       Grid.Row="0" />
                            <!-- TODO: Use constant from DosShellItemHelpers as ImageIcon.Source -->
                            <ImageIcon x:Name="ImageGridView_ItemTemplate_DefaultFileIcon"
                                       Visibility="{x:Bind IsFile}"
                                       Source="ms-appx:///Assets/Views/Workbench/Shell32 Default unknown File.ico"
                                       Grid.Row="0" />
                            <!-- TODO: Set FontSize by style template -->
                            <TextBlock x:Name="ImageGridView_ItemTemplate_TextBlock"
                                       Grid.Row="1"
                                       FontSize="12"
                                       HorizontalAlignment="Center"
                                       Style="{StaticResource SubtitleTextBlockStyle}"
                                       Text="{x:Bind Name}" />
                        </Grid>
                    </DataTemplate>
                    <Style x:Key="ImageGridViewItemContainerStyle"
                           TargetType="GridViewItem">
                        <Setter Property="Margin"
                                Value="3" />
                    </Style>
                </Grid.Resources>

                <!-- TODO: Enable vertical scrolling for Tree: VerticalScrollMode="Enabled"
                            HorizontalScrollMode="Enabled"
                            HorizontalScrollBarVisibility="Auto"
                            VerticalScrollMode="Enabled"
                        VerticalScrollBarVisibility="True"
                -->

                <!--  Left-side 'Shelf', In this case you could also use a GridSplitter  -->
                <Border x:Name="SideContent">
                    <!-- ItemTemplateSelector="{StaticResource ExplorerItemTemplateSelector}" -->
                    <!-- ItemsSource="{x:Bind ShellItems}" -->
                    <TreeView x:Name="ShellTreeView"
                              ItemsSource="{x:Bind ShellTreeViewItems}"
                              ItemTemplate="{StaticResource ShellTreeViewItemTemplate}" />
                </Border>
                <!-- Center element: ContentSizer -->
                <controls:ContentSizer Grid.Column="1"
                                       TargetControl="{x:Bind SideContent}" />
                <!-- Right-side 'Shelf' -->
                <!--<ScrollViewer Grid.Column="2"
                                  ZoomMode="Enabled"
                                  IsTabStop="True"
                                  IsVerticalScrollChainingEnabled="True"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  ViewChanged="ScrollViewerControl_ViewChanged"
                                  HorizontalScrollMode="Disabled"
                                  HorizontalScrollBarVisibility="Visible"
                                  VerticalScrollMode="Enabled"
                                  VerticalScrollBarVisibility="Auto">
                        <GridView x:Name="ShellGridView"
                                  ItemContainerStyle="{StaticResource ImageGridViewItemContainerStyle}"
                                  ItemsSource="{x:Bind ShellGridViewItems}"
                                  ItemTemplate="{StaticResource ShellGridViewItemTemplate}"
                                  ContainerContentChanging="ImageGridView_ContainerContentChanging">
                        </GridView>
                </ScrollViewer>-->
                <GridView x:Name="ShellGridView"
                          Grid.Column="2"
                          ItemContainerStyle="{StaticResource ImageGridViewItemContainerStyle}"
                          ItemsSource="{x:Bind ShellGridViewItems}"
                          ItemTemplate="{StaticResource ShellGridViewItemTemplate}"
                          ContainerContentChanging="ImageGridView_ContainerContentChanging" />
            </Grid>
        </StackPanel>
    </Grid>
</Page>
